Self Driving Car
================

There is no original README and everything is written by Masaki so far.

Requirements and installation
-----------------------------

See the [README](../README.md) in the above directory.


Usage
-----

The basic usage is as follows.

> python krl.py

### Options

- **-c**, **--collect-data**: Provide a file for collecting convergence data
- **-s**, **--shield_options**: Indicate that a post-posed shield should be used
- **-v**, **--viz_options**: Indicate to visualize
- **-vv**, **--vizviz_options**: Indicate to visualize training
- **-n**, **--negative-reward**: Indicate that negative reward should be used for unsafe actions
- **-m**, **--manual**: Indicate that input is from user
- **-r**, **--sarsa**: Indicate to use SARSA instead of the default Q-learning
- **-bn**, **--bigneg**: Indicate to use big negative
- **--num-steps**: Number of interactions. (default=20)
- **-p**, **--pre**: Indicated to use a preemptive shield in addition to the post-posed shield. Note: we cannot give both **-s** and **-p**.

### Options for the experiment settings in the paper

Although the exact experiment setting is unclear from the paper, I suppose the following are the options to reproduce the experiment setting.

- No shielding: no option
- |rank| = 1 w/o penalty: `-s`
- Preemptive Shielding: `-p`

Shielded specification
----------------------

According to the paper, the shielded specification is as follows. The exact specification in the implementation is unclear.

> The safety specification in this example is to avoid crashing into a wall.

Input and output of the shield
------------------------------

### Information from the paper 

* State: x-y position, cosine and the sine of its heading
* Specification: avoid crashing into a wall

### Information from the implementation

According to `safelearn2.py`, the inputs and the outputs of the shield are 4bits and 3bits, respectively. The input to the shield is generated by `get_input` or `get_input_maze` in `rl/core.py`. The input is a state above discretized into 4bits. See `get_input` and `get_input_maze`.

TODO: Description of the original arena
---------------------------------

TODO: How to use automata learning
----------------------------------

Questions
---------

* It is unclear how to construct the shield in `safelearn2.py`. At least `.dfa` files are not provided, and we cannot use `shield_synthesis`.
